<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
    xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog https://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.4.xsd"
    objectQuotingStrategy="QUOTE_ONLY_RESERVED_WORDS">

  <changeSet id="users" author="Codeborne">
    <createTable tableName="users">
      <column name="id" type="uuid" defaultValueComputed="uuid_generate_v4()"><constraints primaryKey="true"/></column>
      <column name="email" type="varchar"><constraints nullable="false" unique="true"/></column>
      <column name="firstName" type="varchar"><constraints nullable="false"/></column>
      <column name="lastName" type="varchar"><constraints nullable="false"/></column>
      <column name="passwordHash" type="varchar"><constraints nullable="false"/></column>
      <column name="locale" type="varchar" defaultValue="en"><constraints nullable="false"/></column>
      <column name="createdAt" type="timestamptz" defaultValueComputed="current_timestamp"/>
    </createTable>

    <createIndex tableName="users" indexName="users_email_idx" unique="true">
      <column name="email"/>
    </createIndex>
  </changeSet>
</databaseChangeLog>
